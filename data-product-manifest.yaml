jobId: "2476"
jobName: test-pyspark
jobType: Source Aligned Data Product
developerId: b8f49c1f-f967-420f-8709-ea864dc0caa5
domain: business
alias: iceberg_state_management_componenet_1
discoveryPort:
  name: test-pyspark_1
inputPorts:
  - alias: data_2_1
    isDynamic: true
    connection: Postgres
    tableName/query: data_2
    optional:
      persistDataFrame: false
      enableDataReconciliation: false
      enforceSchema: false
      dataSetUrn: urn:dv:dataset:faa03fb5-a145-4b8e-985b-90ffb96b1e27
    type: readPostGreSqlDbUsingJdbc
productState:
  printSchema: true
  count: true
  showData: true
  persistDataFrame: false
  catalogType: postgres
  enforceSchema: false
  connection: S3 Connection
  stepName: iceberg state management componenet
  tableName: iceberg_meta.pyspark_regressive
  warehousePath: s3a://dataverse/iceberg_warehouse_testing/
  catalogName: postgres_catalog
  type: readDataIceberg
  isStateManagement: true
  sequence: 3
  alias: iceberg_state_management_componenet
  refreshInterval: None
  retentionVersions: ""
  logicalSchema:
    properties:
      Name:
        type: STRING
        description: Name of the user
        sourceColumn: Name
        sourceTable: public.data_1
      Age:
        type: STRING
        description: Age of the user
        sourceColumn: Age
        sourceTable: public.data_1
      City:
        type: STRING
        description: Location of the user
        sourceColumn: City
        sourceTable: public.data_1
      Occupation:
        type: STRING
        description: Profession of the user
        sourceColumn: Occupation
        sourceTable: public.data_1
  enforceSchemaMethod: ""
  isProfilingEnabled: true
transformation:
  - isDynamic: true
    alias: EMR_PySpark_1
    description: "transform with the help of emr pyspark component "
    sequence: 2
    arguments: []
    pythonFilePath: /home/ec2-user/pyspark_utilities/postgres_to_iceberg_postgres_catalog_pyspark_script.py
    inputDataFrameList:
      - inputDataFrame: data_2_1
        tempViewName: ""
    optional: {}
    type: customPySparkEMRServerless
controlPort:
  dataQualityRules:
    NullValueCheck:
      productState:
        checks:
          - column: Name
            expression: ==
        referenceAlias: iceberg_state_management_componenet
    UniquenessCheck:
      productState:
        checks:
          - column: City
        referenceAlias: iceberg_state_management_componenet
